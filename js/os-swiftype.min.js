$(function(){function f(a){"function"==typeof jQuery&&a instanceof jQuery&&(a=a[0]);var b=$(".swtpbutton")[0].getBoundingClientRect(),c=a.getBoundingClientRect();return c.left>=0&&c.bottom+b.height<=(window.innerHeight||document.documentElement.clientHeight)&&c.right<=(window.innerWidth||document.documentElement.clientWidth)}function g(){return function(){if(void 0!==$(".result").last()[0])if(f($(".result").last()))$(".swtpbutton").css({position:"relative",bottom:"initial",width:"auto","padding-left":"0px","padding-right":"0px","border-left":"0px solid #e6e6e6","border-bottom":"0px solid #e6e6e6"});else{var a=$(".result").last()[0].getBoundingClientRect().width;$(".swtpbutton").css({position:"fixed",bottom:"0",width:a,"padding-left":"0px","padding-right":"0px","border-left":"1px solid #e6e6e6","border-bottom":"1px solid #e6e6e6"})}}}var b=function(a,b){var c=b.highlight.body;void 0===c&&(c=b.body.substring(0,300)),c=c.concat("...");var d='<div class="st-result"><h4 class="title"><a href="'+b.url+'" class="st-search-result-link">'+b.title+'</a></h4><div class="st-metadata"><span class="st-url">'+b.url+'</span><span class="st-snippet">'+c.replace("matchCookie"," ").replace("<em>match</em>Cookie","")+"</span></div></div>";return d},c=function(a,b){var c='<p class="title">'+b.title+"</p>";return c=void 0!==b.description?c.concat('<p class="body">'+b.description.replace("matchCookie"," ").replace("<em>match</em>Cookie","")+"</p>"):void 0!==b.highlight.body?c.concat('<p class="body">'+b.highlight.body.replace("matchCookie"," ").replace("<em>match</em>Cookie","")+"</p>"):c.concat('<p class="body">'+b.body.replace("matchCookie"," ").replace("<em>match</em>Cookie","")+"</p>")},d=function(a,b){var c=[],d="/search/#stq="+$("#st-search-input").val()+"&stp=1",e={type:"post",url:d,title:"",id:"",_type:"page",_index:"crawled",_version:null,sort:null,highlight:{title:""}};$.each(b,function(a,b){$.each(b,function(a,b){b.type&&c.length<5&&c.push(b),c.length>4}),c.length>4});var f=$('<div class="autocompbox"></div>'),g=$('<ul class="WebSite"></ul>');$.each(c,function(b,c){var d='<p class="title">'+c.title+"</p>";d=void 0!==c.description?d.concat('<p class="body">'+c.description.replace("matchCookie"," ").replace("<em>match</em>Cookie","")+"</p>"):void 0!==c.highlight.body?d.concat('<p class="body">'+c.highlight.body.replace("matchCookie"," ").replace("<em>match</em>Cookie","")+"</p>"):d.concat('<p class="body">'+c.body.replace("matchCookie"," ").replace("<em>match</em>Cookie","")+"</p>"),a.registerResult($('<li class="result">'+d+"</li>").appendTo(g),c)}),c.length>0&&(a.registerResult($('<li class="swtpbutton"><p>See all results</p></li>').appendTo(g),e),g.appendTo(f)),c.length>0&&f.appendTo(a.list)};$("#st-search-input").keydown(function(a){13!==a.which||$(".autocomplete li.active").is(":visible")||(window.location="/search/#stq="+$(this).val()+"&stp=1",$("#st-search-input-2").val($(this).val()))}),$("#st-search-input-2").keydown(function(a){13!==a.which||$(".autocomplete li.active").is(":visible")||(window.location.hash="#stq="+$(this).val()+"&stp=1",$("#st-search-input").val($(this).val()))});var h=g();$(window).on("DOMContentLoaded load resize scroll",h),$(document).ready(function(){""!==$.hashParams().stq&&($("#st-search-input").val($.hashParams().stq),$("#st-search-input-2").val($.hashParams().stq))}),$(window).hashchange(function(){""!==$.hashParams().stq&&($("#st-search-input").val($.hashParams().stq),$("#st-search-input-2").val($.hashParams().stq))}),$(document).delegate(".autocomplete li","mouseout",function(){$(this).removeClass("active")}),$("#st-search-input").swiftypeSearch({resultContainingElement:"#st-results-container",engineKey:"GZhgtDYXiyvDjz48t2SP",renderFunction:b,perPage:10,resultPageURL:"/search/"}),$("#st-search-input").swiftype({engineKey:"GZhgtDYXiyvDjz48t2SP",resultRenderFunction:d,setWidth:!1,resultLimit:5,fetchFields:{page:["url","body","title","type","highlight","sections"]}}),$("#st-search-input-2").swiftype({engineKey:"GZhgtDYXiyvDjz48t2SP",fetchFields:{page:["url","body","title","type","highlight","sections"]},renderFunction:c,resultLimit:5})});