function getParameterByName(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),i=t.exec(location.search);return null===i?"":decodeURIComponent(i[1].replace(/\+/g," "))}function htmlEscape(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}!function(e,t,i){"$:nomunge";function n(e){return e=e||location.href,"#"+e.replace(/^[^#]*#?(.*)$/,"$1")}var s,a="hashchange",o=document,r=e.event.special,l=o.documentMode,c="on"+a in t&&(l===i||l>7);e.fn[a]=function(e){return e?this.bind(a,e):this.trigger(a)},e.fn[a].delay=50,r[a]=e.extend(r[a],{setup:function(){return c?!1:void e(s.start)},teardown:function(){return c?!1:void e(s.stop)}}),s=function(){function s(){var i=n(),o=f(u);i!==u?(p(u=i,o),e(t).trigger(a)):o!==u&&(location.href=location.href.replace(/#.*/,"")+o),r=setTimeout(s,e.fn[a].delay)}var r,l={},u=n(),d=function(e){return e},p=d,f=d;return l.start=function(){r||s()},l.stop=function(){r&&clearTimeout(r),r=i},e.browser.msie&&!c&&function(){var t,i;l.start=function(){t||(i=e.fn[a].src,i=i&&i+n(),t=e('<iframe tabindex="-1" title="empty"/>').hide().one("load",function(){i||p(n()),s()}).attr("src",i||"javascript:0").insertAfter("body")[0].contentWindow,o.onpropertychange=function(){try{"title"===event.propertyName&&(t.document.title=o.title)}catch(e){}})},l.stop=d,f=function(){return n(t.location.href)},p=function(i,n){var s=t.document,r=e.fn[a].domain;i!==n&&(s.title=o.title,s.open(),r&&s.write('<script>document.domain="'+r+'"</script>'),s.close(),t.location.hash=i)}}(),l}()}(jQuery,this),!function(e){function t(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}var i=function(e){var t,i,n={};if(""===e)return{};for(t=0;t<e.length;t+=1)i=e[t].split("="),2===i.length&&(n[i[0]]=decodeURIComponent(i[1].replace(/\+/g," ")));return n};e.queryParams=function(){return i(window.location.search.substr(1).split("&"))},e.hashParams=function(){return i(window.location.hash.substr(1).split("&"))},window.Swiftype=window.Swiftype||{},Swiftype.root_url=Swiftype.root_url||"https://api.swiftype.com",Swiftype.pingUrl=function(e,t){var i=setTimeout(t,350),n=new Image;return n.onload=n.onerror=function(){clearTimeout(i),t()},n.src=e,!1},Swiftype.pingSearchResultClick=function(t,i,n){var s={t:(new Date).getTime(),engine_key:t,doc_id:i,q:Swiftype.currentQuery},a=Swiftype.root_url+"/api/v1/public/analytics/pc?"+e.param(s);Swiftype.pingUrl(a,n)},e.fn.swiftypeSearch=function(t){var t=e.extend({},e.fn.swiftypeSearch.defaults,t);return this.each(function(){var i=e(this),n=e.meta?e.extend({},t,i.data()):t;i.data("swiftype-config-search",n),i.selectedCallback=function(t){return function(i){var s=e(this);i.preventDefault(),Swiftype.pingSearchResultClick(n.engineKey,t.id,function(){window.location=s.attr("href")})}},i.registerResult=function(t,n){t.data("swiftype-item",n),e("a",t).click(i.selectedCallback(n))},i.getContentCache=function(){return e("#"+o)};var s=e(n.resultContainingElement),a=s.html(),o="st-content-cache",r=i.getContentCache(),l=function(e,t){location.hash="stq="+encodeURIComponent(e)+"&stp="+t},c=function(t,i){function l(e){if(void 0!==e){var t=e;return"function"==typeof t&&(t=t.call()),t}return void 0}i=e.extend({page:1},i);var c={};r.length||(s.after("<div id='"+o+"' style='display: none;'></div>"),r.html(a).hide()),n.loadingFunction(t,s),Swiftype.currentQuery=t,c.q=t,c.engine_key=n.engineKey,c.page=i.page,c.per_page=n.perPage,c.search_fields=l(n.searchFields),c.fetch_fields=l(n.fetchFields),c.facets=l(n.facets),c.filters=l(n.filters),c.document_types=l(n.documentTypes),c.functional_boosts=l(n.functionalBoosts),c.sort_field=l(n.sortField),c.sort_direction=l(n.sortDirection),c.spelling=l(n.spelling),e.getJSON(Swiftype.root_url+"/api/v1/public/engines/search.json?callback=?",c).success(d)};e(window).hashchange(function(){var t=e.hashParams(),n=e.queryParams();if(t.stq||n.tag)c(t.stq,{page:t.stp});else{var a=i.getContentCache();a.length&&(s.html(a.html()),a.remove())}});var u=i.parents("form");u&&u.bind("submit",function(e){e.preventDefault();var t=i.val();l(t,1)}),e(document).on("click","[data-hash][data-page]",function(t){t.preventDefault();var i=e(this);l(e.hashParams().stq,i.data("page"))}),e(document).on("click","[data-hash][data-spelling-suggestion]",function(t){t.preventDefault();var i=e(this);l(i.data("spelling-suggestion"),1)});var d=function(e){"function"==typeof n.preRenderFunction&&n.preRenderFunction.call(i,e),n.renderResultsFunction(i.getContext(),e),"function"==typeof n.postRenderFunction&&n.postRenderFunction.call(i,e)};i.getContext=function(){return{config:n,resultContainer:s,registerResult:i.registerResult}},e(window).hashchange()})};var n=function(t,i){var n,s=-1,a=t.config;e.each(i,function(e,t){t.num_pages>s&&(n=e,s=t.num_pages)});var o=i[n].current_page,r=i[n].num_pages;e(a.renderPaginationForType(n,o,r)).appendTo(t.resultContainer)},s=function(t,i){var s=t.resultContainer,a=t.config;s.html(""),e.each(i.records,function(i,n){e.each(n,function(n,o){t.registerResult(e(a.renderFunction(i,o)).appendTo(s),o)})}),n(t,i.info)},a=function(e,i){return'<div class="st-result"><h3 class="title"><a href="'+i.url+'" class="st-search-result-link">'+t(i.title)+"</a></h3></div>"},o=function(e,t){t.html('<p class="st-loading-message">loading...</p>')},r=function(t){var i=0,n=this.getContext().resultContainer,s=null;t.info&&e.each(t.info,function(e,t){i+=t.total_result_count,t.spelling_suggestion&&(s=t.spelling_suggestion.text)}),0===i&&n.html("<div id='st-no-results' class='st-no-results'><div class='row'><div class='span12 bold bot20'>Your search did not match any documents.</div><div class='span12'>Search tips:</div><div class='span12'>•&nbsp; Make sure all words are spelled correctly.</div><div class='span12'>•&nbsp; Make your search more general</div><div class='span12'>•&nbsp; Try different words that mean the same thing</div></div></div>"),null!==s&&n.append('<div class="st-spelling-suggestion">Did you mean <a href="#" data-hash="true" data-spelling-suggestion="'+s+'">'+s+"</a>?</div>")},l=function(e,t,i){var n,s,a='<div class="st-page">';return 1!=t&&(n=t-1,a=a+'<a href="#" class="st-prev" data-hash="true" data-page="'+n+'">&laquo; previous</a>'),i>t&&(s=t+1,a=a+'<a href="#" class="st-next" data-hash="true" data-page="'+s+'">next &raquo;</a>'),a+="</div>"};e.fn.swiftypeSearch.defaults={attachTo:void 0,documentTypes:void 0,facets:void 0,filters:void 0,engineKey:void 0,searchFields:void 0,functionalBoosts:void 0,sortField:void 0,sortDirection:void 0,fetchFields:void 0,preRenderFunction:void 0,postRenderFunction:r,loadingFunction:o,renderResultsFunction:s,renderFunction:a,renderPaginationForType:l,perPage:10,spelling:"strict"}}(jQuery),function(e){function t(e){this.size=0,this.limit=e,this._keymap={}}var i=function(e){var t,i,n={};if(""===e)return{};for(t=0;t<e.length;t+=1)i=e[t].split("="),2===i.length&&(n[i[0]]=decodeURIComponent(i[1].replace(/\+/g," ")));return n};e.queryParams=function(){return i(window.location.search.substr(1).split("&"))},e.hashParams=function(){return i(window.location.hash.substr(1).split("&"))};var n=0;window.Swiftype=window.Swiftype||{},Swiftype.root_url=Swiftype.root_url||"https://api.swiftype.com",Swiftype.pingUrl=function(e,t){var i=setTimeout(t,350),n=new Image;return n.onload=n.onerror=function(){clearTimeout(i),t()},n.src=e,!1},Swiftype.pingAutoSelection=function(t,i,n,s){var a={t:(new Date).getTime(),engine_key:t,doc_id:i,prefix:n},o=Swiftype.root_url+"/api/v1/public/analytics/pas?"+e.param(a);Swiftype.pingUrl(o,s)},Swiftype.findSelectedSection=function(){function t(e){var t=e.replace(/\s+/g,"");return t=t.toLowerCase()}var i=e.hashParams().sts;i&&(i=t(i),e("h1, h2, h3, h4, h5, h6").each(function(){return $this=e(this),t($this.text()).indexOf(i)>=0?(this.scrollIntoView(!0),!1):void 0}))},Swiftype.htmlEscape=Swiftype.htmlEscape||function(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},e.fn.swiftype=function(i){Swiftype.findSelectedSection();var i=e.extend({},e.fn.swiftype.defaults,i);return this.each(function(){var a=e(this),o=e.meta?e.extend({},i,a.data()):i;a.attr("autocomplete","off"),a.data("swiftype-config-autocomplete",o),a.submitted=!1,a.cache=new t(10),a.emptyQueries=[],a.isEmpty=function(t){return e.inArray(s(t),this.emptyQueries)>=0},a.addEmpty=function(e){a.emptyQueries.unshift(s(e))};var l=o.dropdownStylesFunction(a),c=e('<div class="swiftype-widget" />'),u=e("<div />").addClass(o.suggestionListClass).appendTo(c).css(l).hide();c.appendTo(o.autocompleteContainingElement);var d=e("<"+o.suggestionListType+" />").appendTo(u);a.data("swiftype-list",d),a.abortCurrent=function(){a.currentRequest&&a.currentRequest.abort()},a.showList=function(){f(o.disableAutocomplete)===!1&&u.show()},a.hideList=function(e){e?u.hide():setTimeout(function(){u.hide()},10)},a.focused=function(){return a.is(":focus")},a.submitting=function(){a.submitted=!0},a.listResults=function(){return e(o.resultListSelector,d)},a.activeResult=function(){return a.listResults().filter("."+o.activeItemClass).first()},a.prevResult=function(){var e=a.listResults(),t=e.index(a.activeResult()),i=t-1,n=e.eq(i);a.listResults().removeClass(o.activeItemClass),i>=0&&n.addClass(o.activeItemClass)},a.nextResult=function(){var e=a.listResults(),t=e.index(a.activeResult()),i=t+1,n=e.eq(i);a.listResults().removeClass(o.activeItemClass),i>=0&&n.addClass(o.activeItemClass)},a.selectedCallback=function(e){return function(){var t=a.val(),i=function(){o.onComplete(e,t)};Swiftype.pingAutoSelection(o.engineKey,e.id,t,i)}},a.registerResult=function(e,t){e.data("swiftype-item",t),e.click(a.selectedCallback(t)).mouseover(function(){a.listResults().removeClass(o.activeItemClass),e.addClass(o.activeItemClass)})},a.getContext=function(){return{config:o,list:d,registerResult:a.registerResult}};var p,h=!1;a.lastValue="",a.keyup(function(e){return h?void(h=!1):void(e.which>36&&e.which<41||16==e.which||(o.typingDelay>0?(clearTimeout(p),p=setTimeout(function(){r(a)},o.typingDelay)):r(a)))}),a.styleDropdown=function(){u.css(o.dropdownStylesFunction(a))},e(window).resize(function(){a.styleDropdown()}),a.keydown(function(e){a.styleDropdown();var t=a.activeResult();switch(e.which){case 13:0!==t.length&&d.is(":visible")?(e.preventDefault(),a.selectedCallback(t.data("swiftype-item"))()):a.currentRequest&&a.submitting(),a.hideList(),h=!0;break;case 38:e.preventDefault(),0===t.length?a.listResults().last().addClass(o.activeItemClass):a.prevResult();break;case 40:e.preventDefault(),0===t.length?a.listResults().first().addClass(o.activeItemClass):t!=a.listResults().last()&&a.nextResult();break;case 27:a.hideList(),h=!0;break;default:a.submitted=!1}}),a.keypress(function(e){13==e.which&&a.activeResult().length>0&&e.preventDefault()});var v=!1,g=!1;e(document).bind("mousedown.swiftype"+ ++n,function(){v=!0}),e(document).bind("mouseup.swiftype"+n,function(){v=!1,g&&(g=!1,a.hideList())}),a.blur(function(){v?g=!0:a.hideList()}),a.focus(function(){setTimeout(function(){a.select()},10),a.listResults().filter(":not(."+o.noResultsClass+")").length>0&&a.showList()})})};var s=function(t){return e.trim(t).toLowerCase()},a=function(t,i){t.abortCurrent();var n={},a=t.data("swiftype-config-autocomplete");n.q=i,n.engine_key=a.engineKey,n.search_fields=f(a.searchFields),n.fetch_fields=f(a.fetchFields),n.filters=f(a.filters),n.document_types=f(a.documentTypes),n.functional_boosts=f(a.functionalBoosts),n.sort_field=f(a.sortField),n.sort_direction=f(a.sortDirection),n.per_page=a.resultLimit;var o=Swiftype.root_url+"/api/v1/public/engines/suggest.json";t.currentRequest=e.ajax({type:"GET",dataType:"jsonp",url:o,data:n}).success(function(e){var n=s(i);return e.record_count>0?(t.cache.put(n,e.records),void l(t,e.records,i)):(t.addEmpty(n),t.data("swiftype-list").empty(),void t.hideList())})},o=function(e,t){var i=s(t);if(e.isEmpty(i))return e.data("swiftype-list").empty(),void e.hideList();var n=e.cache.get(i);n?l(e,n,t):a(e,t)},r=function(t){var i=t.val();if(i!==t.lastValue)return t.lastValue=i,""===e.trim(i)?(t.data("swiftype-list").empty(),void t.hideList()):void("undefined"!=typeof t.data("swiftype-config-autocomplete").engineKey&&o(t,i))},l=function(e,t){var i=e.data("swiftype-list"),n=e.data("swiftype-config-autocomplete");i.empty(),e.hideList(!0),n.resultRenderFunction(e.getContext(),t);var s=e.listResults().length;(s>0&&e.focused()||void 0!==n.noResultsMessage)&&(e.submitted?e.submitted=!1:e.showList())},c=function(t,i){var n=t.list,s=t.config;e.each(i,function(i,a){e.each(a,function(a,o){t.registerResult(e("<li>"+s.renderFunction(i,o)+"</li>").appendTo(n),o)})})},u=function(e,t){return'<p class="title">'+Swiftype.htmlEscape(t.title)+"</p>"},d=function(e){window.location=e.url},p=function(t){var i=t.data("swiftype-config-autocomplete"),n=i.attachTo?e(i.attachTo):t,s=n.offset(),a={position:"absolute","z-index":9999,top:s.top+n.outerHeight()+1,left:s.left};return i.setWidth&&(a.width=n.outerWidth()-2),a},f=function(e){if(void 0!==e){var t=e;return"function"==typeof t&&(t=t.call()),t}return void 0};t.prototype.put=function(e,t){var i={key:e,value:t};return this._keymap[e]=i,this.tail?(this.tail.newer=i,i.older=this.tail):this.head=i,this.tail=i,this.size===this.limit?this.shift():void this.size++},t.prototype.shift=function(){var e=this.head;return e&&(this.head.newer?(this.head=this.head.newer,this.head.older=void 0):this.head=void 0,e.newer=e.older=void 0,delete this._keymap[e.key]),e},t.prototype.get=function(e,t){var i=this._keymap[e];if(void 0!==i)return i===this.tail?i.value:(i.newer&&(i===this.head&&(this.head=i.newer),i.newer.older=i.older),i.older&&(i.older.newer=i.newer),i.newer=void 0,i.older=this.tail,this.tail&&(this.tail.newer=i),this.tail=i,t?i:i.value)},t.prototype.remove=function(e){var t=this._keymap[e];if(t)return delete this._keymap[t.key],t.newer&&t.older?(t.older.newer=t.newer,t.newer.older=t.older):t.newer?(t.newer.older=void 0,this.head=t.newer):t.older?(t.older.newer=void 0,this.tail=t.older):this.head=this.tail=void 0,this.size--,t.value},t.prototype.clear=function(){this.head=this.tail=void 0,this.size=0,this._keymap={}},t.prototype.keys="function"==typeof Object.keys?function(){return Object.keys(this._keymap)}:function(){var e=[];for(var t in this._keymap)e.push(t);return e},e.fn.swiftype.defaults={activeItemClass:"active",attachTo:void 0,documentTypes:void 0,filters:void 0,engineKey:void 0,searchFields:void 0,functionalBoosts:void 0,sortField:void 0,sortDirection:void 0,fetchFields:void 0,noResultsClass:"noResults",noResultsMessage:void 0,onComplete:d,resultRenderFunction:c,renderFunction:u,dropdownStylesFunction:p,resultLimit:void 0,suggestionListType:"ul",suggestionListClass:"autocomplete",resultListSelector:"li",setWidth:!0,typingDelay:80,disableAutocomplete:!1,autocompleteContainingElement:"body"}}(jQuery);var customRendererSearch=function(e,t){var i=t.highlight.body;void 0===i&&(i=t.body.substring(0,300));var n='<div class="st-result"><h4 class="title"><a href="'+t.url+'" class="st-search-result-link">'+t.title+'</a></h4><div class="st-metadata"><span class="st-url">'+t.url+'</span><span class="st-snippet">'+i+"</span></div></div>";return n},customRenderAutoComplete=function(e,t){var i='<p class="title">'+t.title+"</p>";if(t.highlight.sections){var n='<span class="section">'+t.highlight.sections+"</span>";i=i.concat('<p class="sections">'+n+"</p>")}return i},reloadResults=function(){$(window).hashchange()},searchConfig={type:void 0,tags:void 0},readFilters=function(){return""!==getParameterByName("tag")?{page:{type:window.searchConfig.type,tags:getParameterByName("tag")}}:{page:{type:window.searchConfig.type}}};$(function(){$(".st-search .link-tab").on("click",function(e){e.preventDefault();var t=$(this).attr("data-filter-type");$(".st-search .link-tab").removeClass("active"),$(this).addClass("active"),window.searchConfig.type="all"!==t?t:void 0,reloadResults()}),$(".st-search-input").keydown(function(e){13!==e.which||$(".autocomplete li.active").is(":visible")||(window.location="/search/#stq="+$(this).val()+"&stp=1",$(".st-search-input-big").val($(this).val()))}),$(".st-search-input-big").keydown(function(e){13!==e.which||$(".autocomplete li.active").is(":visible")||-1===$(this).val().indexOf("tag:")&&(e.preventDefault(),void 0!==$.queryParams.tag?window.location="/search/#stq="+$(this).val()+"&stp=1":(window.location.hash="#stq="+$(this).val()+"&stp=1",$(".st-search-input").val($(this).val()),$(".searchQueryHolder").html($.hashParams().stq)))}),""!==$.hashParams().stq&&($(".st-search-input").val($.hashParams().stq),$(".st-search-input-big").val($.hashParams().stq)),$(".st-search-input").swiftypeSearch({resultContainingElement:".st-results-container",engineKey:"GZhgtDYXiyvDjz48t2SP",renderFunction:customRendererSearch,perPage:10,resultPageURL:"/community/st_search.aspx",filters:readFilters})});